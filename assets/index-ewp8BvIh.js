import{c as e,d as t,Q as l,cY as a,b as n,l as o,e as c,$ as r,cZ as s,N as d,cE as i,a7 as u,_ as v,f as p,ai as y,X as f,a3 as h,ah as b,P as K,aj as x,A as m,Y as k,er as O,cW as g,cc as N}from"./index-hPCwy2cU.js";import{e as w,r as E,T as j,t as D,f as S,h as A,F as C,c as P,i as H,V as I}from"./index-HouOtm8A.js";function T(t){const{dropPosition:l,dropLevelOffset:a,prefixCls:n,indent:o,direction:c="ltr"}=t,r="ltr"===c?"left":"right",s={[r]:-a*o+4+"px",["ltr"===c?"right":"left"]:0};switch(l){case-1:s.top="-3px";break;case 1:s.bottom="-3px";break;default:s.bottom="-3px",s[r]=`${o+4}px`}return e("div",{style:s,class:`${n}-drop-indicator`},null)}const L=()=>{const e=D();return d(d({},e),{showLine:y([Boolean,Object]),multiple:f(),autoExpandParent:f(),checkStrictly:f(),checkable:f(),disabled:f(),defaultExpandAll:f(),defaultExpandParent:f(),defaultExpandedKeys:h(),expandedKeys:h(),checkedKeys:y([Array,Object]),defaultCheckedKeys:h(),selectedKeys:h(),defaultSelectedKeys:h(),selectable:f(),loadedKeys:h(),draggable:f(),showIcon:f(),icon:b(),switcherIcon:K.any,prefixCls:String,replaceFields:x(),blockNode:f(),openAnimation:K.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":b(),"onUpdate:checkedKeys":b(),"onUpdate:expandedKeys":b()})},$=t({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:l(L(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:Object,setup(t,l){let{attrs:y,expose:f,emit:h,slots:b}=l;a(!(void 0===t.treeData&&b.default));const{prefixCls:K,direction:x,virtual:m}=n("tree",t),[k,O]=w(K),g=o();f({treeRef:g,onNodeExpand:function(){var e;null===(e=g.value)||void 0===e||e.onNodeExpand(...arguments)},scrollTo:e=>{var t;null===(t=g.value)||void 0===t||t.scrollTo(e)},selectedKeys:c((()=>{var e;return null===(e=g.value)||void 0===e?void 0:e.selectedKeys})),checkedKeys:c((()=>{var e;return null===(e=g.value)||void 0===e?void 0:e.checkedKeys})),halfCheckedKeys:c((()=>{var e;return null===(e=g.value)||void 0===e?void 0:e.halfCheckedKeys})),loadedKeys:c((()=>{var e;return null===(e=g.value)||void 0===e?void 0:e.loadedKeys})),loadingKeys:c((()=>{var e;return null===(e=g.value)||void 0===e?void 0:e.loadingKeys})),expandedKeys:c((()=>{var e;return null===(e=g.value)||void 0===e?void 0:e.expandedKeys}))}),r((()=>{s(void 0===t.replaceFields,"Tree","`replaceFields` is deprecated, please use fieldNames instead")}));const N=(e,t)=>{h("update:checkedKeys",e),h("check",e,t)},D=(e,t)=>{h("update:expandedKeys",e),h("expand",e,t)},S=(e,t)=>{h("update:selectedKeys",e),h("select",e,t)};return()=>{const{showIcon:l,showLine:a,switcherIcon:n=b.switcherIcon,icon:o=b.icon,blockNode:c,checkable:r,selectable:s,fieldNames:f=t.replaceFields,motion:h=t.openAnimation,itemHeight:w=28,onDoubleclick:A,onDblclick:C}=t,P=d(d(d({},y),i(t,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{showLine:Boolean(a),dropIndicatorRender:T,fieldNames:f,icon:o,itemHeight:w}),H=b.default?u(b.default()):void 0;return k(e(j,v(v({},P),{},{virtual:m.value,motion:h,ref:g,prefixCls:K.value,class:p({[`${K.value}-icon-hide`]:!l,[`${K.value}-block-node`]:c,[`${K.value}-unselectable`]:!s,[`${K.value}-rtl`]:"rtl"===x.value},y.class,O.value),direction:x.value,checkable:r,selectable:s,switcherIcon:e=>E(K.value,n,e,b.leafIcon,a),onCheck:N,onExpand:D,onSelect:S,onDblclick:C||A,children:H}),d(d({},b),{checkable:()=>e("span",{class:`${K.value}-checkbox-inner`},null)})))}}});const F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};function V(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),a.forEach((function(t){M(e,t,l[t])}))}return e}function M(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var U=function(t,l){var a=V({},t,l.attrs);return e(m,V({},a,{icon:F}),null)};U.displayName="FolderOpenOutlined",U.inheritAttrs=!1;const z=U;const B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};function R(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(l);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(l).filter((function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable})))),a.forEach((function(t){Y(e,t,l[t])}))}return e}function Y(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}var Q=function(t,l){var a=R({},t,l.attrs);return e(m,R({},a,{icon:B}),null)};Q.displayName="FolderOutlined",Q.inheritAttrs=!1;const W=Q;var X,Z;function _(e,t,l){e.forEach((function(e){const a=e[t.key],n=e[t.children];!1!==l(a,e)&&_(n||[],t,l)}))}function q(e){let{treeData:t,expandedKeys:l,startKey:a,endKey:n,fieldNames:o={title:"title",key:"key",children:"children"}}=e;const c=[];let r=X.None;if(a&&a===n)return[a];if(!a||!n)return[];return _(t,o,(e=>{if(r===X.End)return!1;if(function(e){return e===a||e===n}(e)){if(c.push(e),r===X.None)r=X.Start;else if(r===X.Start)return r=X.End,!1}else r===X.Start&&c.push(e);return l.includes(e)})),c}function G(e,t,l){const a=[...t],n=[];return _(e,l,((e,t)=>{const l=a.indexOf(e);return-1!==l&&(n.push(t),a.splice(l,1)),!!a.length})),n}(Z=X||(X={}))[Z.None=0]="None",Z[Z.Start=1]="Start",Z[Z.End=2]="End";function J(t){const{isLeaf:l,expanded:a}=t;return e(l?C:a?z:W,null,null)}const ee=t({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:l(d(d({},L()),{expandAction:y([Boolean,String])}),{showIcon:!0,expandAction:"click"}),slots:Object,setup(t,l){let{attrs:a,slots:r,emit:s,expose:i}=l;var y;const f=o(t.treeData||S(u(null===(y=r.default)||void 0===y?void 0:y.call(r))));k((()=>t.treeData),(()=>{f.value=t.treeData})),O((()=>{g((()=>{var e;void 0===t.treeData&&r.default&&(f.value=S(u(null===(e=r.default)||void 0===e?void 0:e.call(r))))}))}));const h=o(),b=o(),K=c((()=>A(t.fieldNames))),x=o();i({scrollTo:e=>{var t;null===(t=x.value)||void 0===t||t.scrollTo(e)},selectedKeys:c((()=>{var e;return null===(e=x.value)||void 0===e?void 0:e.selectedKeys})),checkedKeys:c((()=>{var e;return null===(e=x.value)||void 0===e?void 0:e.checkedKeys})),halfCheckedKeys:c((()=>{var e;return null===(e=x.value)||void 0===e?void 0:e.halfCheckedKeys})),loadedKeys:c((()=>{var e;return null===(e=x.value)||void 0===e?void 0:e.loadedKeys})),loadingKeys:c((()=>{var e;return null===(e=x.value)||void 0===e?void 0:e.loadingKeys})),expandedKeys:c((()=>{var e;return null===(e=x.value)||void 0===e?void 0:e.expandedKeys}))});const m=o(t.selectedKeys||t.defaultSelectedKeys||[]),w=o((()=>{const{keyEntities:e}=P(f.value,{fieldNames:K.value});let l;return l=t.defaultExpandAll?Object.keys(e):t.defaultExpandParent?H(t.expandedKeys||t.defaultExpandedKeys||[],e):t.expandedKeys||t.defaultExpandedKeys,l})());k((()=>t.selectedKeys),(()=>{void 0!==t.selectedKeys&&(m.value=t.selectedKeys)}),{immediate:!0}),k((()=>t.expandedKeys),(()=>{void 0!==t.expandedKeys&&(w.value=t.expandedKeys)}),{immediate:!0});const E=N(((e,t)=>{const{isLeaf:l}=t;l||e.shiftKey||e.metaKey||e.ctrlKey||x.value.onNodeExpand(e,t)}),200,{leading:!0}),j=(e,l)=>{void 0===t.expandedKeys&&(w.value=e),s("update:expandedKeys",e),s("expand",e,l)},D=(e,l)=>{const{expandAction:a}=t;"click"===a&&E(e,l),s("click",e,l)},C=(e,l)=>{const{expandAction:a}=t;"dblclick"!==a&&"doubleclick"!==a||E(e,l),s("doubleclick",e,l),s("dblclick",e,l)},I=(e,l)=>{const{multiple:a}=t,{node:n,nativeEvent:o}=l,c=n[K.value.key],r=d(d({},l),{selected:!0}),i=(null==o?void 0:o.ctrlKey)||(null==o?void 0:o.metaKey),u=null==o?void 0:o.shiftKey;let v;a&&i?(v=e,h.value=c,b.value=v,r.selectedNodes=G(f.value,v,K.value)):a&&u?(v=Array.from(new Set([...b.value||[],...q({treeData:f.value,expandedKeys:w.value,startKey:c,endKey:h.value,fieldNames:K.value})])),r.selectedNodes=G(f.value,v,K.value)):(v=[c],h.value=c,b.value=v,r.selectedNodes=G(f.value,v,K.value)),s("update:selectedKeys",v),s("select",v,r),void 0===t.selectedKeys&&(m.value=v)},T=(e,t)=>{s("update:checkedKeys",e),s("check",e,t)},{prefixCls:L,direction:F}=n("tree",t);return()=>{const l=p(`${L.value}-directory`,{[`${L.value}-directory-rtl`]:"rtl"===F.value},a.class),{icon:n=r.icon,blockNode:o=!0}=t,c=function(e,t){var l={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(l[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(l[a[n]]=e[a[n]])}return l}(t,["icon","blockNode"]);return e($,v(v(v({},a),{},{icon:n||J,ref:x,blockNode:o},c),{},{prefixCls:L.value,class:l,expandedKeys:w.value,selectedKeys:m.value,onSelect:I,onClick:D,onDblclick:C,onExpand:j,onCheck:T}),r)}}}),te=I,le=d($,{DirectoryTree:ee,TreeNode:te,install:e=>(e.component($.name,$),e.component(te.name,te),e.component(ee.name,ee),e)});export{le as T};
