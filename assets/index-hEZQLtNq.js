import{P as e}from"./PageWrapper-_w1STvok.js";import{d as t,K as n,cA as a,e as o,ak as l,H as i,Y as u,J as s,ex as r,c,F as d,ao as f,l as p,r as b,eB as g,cS as m,eC as h}from"./index-hPCwy2cU.js";import{E as v,z as y,y as x,O as j,J as O,V as S,_ as C,Y as z,W as U}from"./index-lwJI5Xg1.js";import{C as T}from"./index-O8biUKFP.js";import{S as w}from"./index-Fa6AgMat.js";import{C as W}from"./index--VM6Akgl.js";import"./Checkbox-eQOZ5DzF.js";import"./index-GQSaD8dc.js";import"./List-teIXDyNS.js";import"./isMobile-aGnBD7or.js";import"./useMergedState-VhlIxWjY.js";import"./CheckOutlined-WBtOhnNS.js";
/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var D,P,V=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[C]}),B=Symbol("vue-codemirror-global-config"),F=function(e){var t=new U;return{compartment:t,run:function(n){t.get(e.state)?e.dispatch({effects:t.reconfigure(n)}):e.dispatch({effects:z.appendConfig.of(t.of(n))})}}},M=function(e,t){var n=F(e),a=n.compartment,o=n.run;return function(n){var l=a.get(e.state);o((null!=n?n:l!==t)?t:[])}},k={type:Boolean,default:void 0},E={autofocus:k,disabled:k,indentWithTab:k,tabSize:Number,placeholder:String,style:Object,autoDestroy:k,phrases:Object,root:Object,extensions:Array,selection:Object},R={modelValue:{type:String,default:""}},A=Object.assign(Object.assign({},E),R);(P=D||(D={})).Change="change",P.Update="update",P.Focus="focus",P.Blur="blur",P.Ready="ready",P.ModelUpdate="update:modelValue";var L={};L[D.Change]=function(e,t){return!0},L[D.Update]=function(e){return!0},L[D.Focus]=function(e){return!0},L[D.Blur]=function(e){return!0},L[D.Ready]=function(e){return!0};var I={};I[D.ModelUpdate]=L[D.Change];var q=Object.assign(Object.assign({},L),I),H=t({name:"VueCodemirror",props:Object.assign({},A),emits:Object.assign({},q),setup:function(e,t){var c=n(),d=n(),f=n(),p=Object.assign(Object.assign({},V),a(B,{})),b=o((function(){var t={};return Object.keys(l(e)).forEach((function(n){var a;"modelValue"!==n&&(t[n]=null!==(a=e[n])&&void 0!==a?a:p[n])})),t}));return i((function(){var n,a;d.value=function(e){var t=e.onUpdate,n=e.onChange,a=e.onFocus,o=e.onBlur,l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}(e,["onUpdate","onChange","onFocus","onBlur"]);return y.create({doc:l.doc,selection:l.selection,extensions:(Array.isArray(l.extensions)?l.extensions:[l.extensions]).concat([v.updateListener.of((function(e){t(e),e.docChanged&&n(e.state.doc.toString(),e),e.focusChanged&&(e.view.hasFocus?a(e):o(e))}))])})}({doc:e.modelValue,selection:b.value.selection,extensions:null!==(n=p.extensions)&&void 0!==n?n:[],onFocus:function(e){return t.emit(D.Focus,e)},onBlur:function(e){return t.emit(D.Blur,e)},onUpdate:function(e){return t.emit(D.Update,e)},onChange:function(n,a){n!==e.modelValue&&(t.emit(D.Change,n,a),t.emit(D.ModelUpdate,n,a))}}),f.value=(a={state:d.value,parent:c.value,root:b.value.root},new v(Object.assign({},a)));var o=function(e){var t=function(){return e.state.doc.toString()},n=F(e).run,a=M(e,[v.editable.of(!1),y.readOnly.of(!0)]),o=M(e,x.of([j])),l=F(e).run,i=F(e).run,u=F(e).run,s=F(e).run;return{focus:function(){return e.focus()},getDoc:t,setDoc:function(n){n!==t()&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:n}})},reExtensions:n,toggleDisabled:a,toggleIndentWithTab:o,setTabSize:function(e){l([y.tabSize.of(e),O.of(" ".repeat(e))])},setPhrases:function(e){i([y.phrases.of(e)])},setPlaceholder:function(e){u(S(e))},setStyle:function(e){void 0===e&&(e={}),s(v.theme({"&":Object.assign({},e)}))}}}(f.value);u((function(){return e.modelValue}),(function(e){e!==o.getDoc()&&o.setDoc(e)})),u((function(){return e.extensions}),(function(e){return o.reExtensions(e||[])}),{immediate:!0}),u((function(){return b.value.disabled}),(function(e){return o.toggleDisabled(e)}),{immediate:!0}),u((function(){return b.value.indentWithTab}),(function(e){return o.toggleIndentWithTab(e)}),{immediate:!0}),u((function(){return b.value.tabSize}),(function(e){return o.setTabSize(e)}),{immediate:!0}),u((function(){return b.value.phrases}),(function(e){return o.setPhrases(e||{})}),{immediate:!0}),u((function(){return b.value.placeholder}),(function(e){return o.setPlaceholder(e)}),{immediate:!0}),u((function(){return b.value.style}),(function(e){return o.setStyle(e)}),{immediate:!0}),b.value.autofocus&&o.focus(),t.emit(D.Ready,{state:d.value,view:f.value,container:c.value})})),s((function(){b.value.autoDestroy&&f.value&&function(e){e.destroy()}(f.value)})),function(){return r("div",{class:"v-codemirror",style:{display:"contents"},ref:c})}}}),J=H;const Y=t({name:"CodeToolbar",props:{config:{type:Object,required:!0}},setup:e=>()=>c("div",{class:"flex-between-h",style:"padding: 8px; border: solid 1px #ddd;"},[c(d,{model:e.config,layout:"inline"},{default:()=>[c(f,{label:"language"},{default:()=>[c(w,{value:e.config.language,"onUpdate:value":t=>e.config.language=t,size:"small",options:[{label:"html",value:"html"},{label:"javascript",value:"javascript"},{label:"typescript",value:"typescript"}],style:"width: 110px"},null)]}),c(f,{label:"autofocus"},{default:()=>[c(T,{checked:e.config.autofocus,"onUpdate:checked":t=>e.config.autofocus=t},null)]}),c(f,{label:"indentWithTab"},{default:()=>[c(T,{checked:e.config.indentWithTab,"onUpdate:checked":t=>e.config.indentWithTab=t},null)]}),c(f,{label:"tabSize"},{default:()=>[c(w,{value:e.config.tabSize,"onUpdate:value":t=>e.config.tabSize=t,size:"small",options:[{label:2,value:2},{label:4,value:4},{label:6,value:6},{label:8,value:8}],style:"width: 100px"},null)]}),c(f,{label:"height"},{default:()=>[c(w,{value:e.config.height,"onUpdate:value":t=>e.config.height=t,size:"small",options:[{label:"auto",value:"auto"},{label:"350px",value:"350px"},{label:"500px",value:"500px"}],style:"width: 100px"},null)]})]})])}),G=t({name:"CodeInfo",props:{config:{type:Object,default:()=>{}},state:{type:Object,default:()=>{}}},setup:e=>()=>c("div",{style:"padding: 4px 8px; border: solid 1px #ddd;"},[c(d,{layout:"inline"},{default:()=>[c(f,{label:"Spaces"},{default:()=>[c("span",null,[e.config.tabSize])]}),c(f,{label:"Length"},{default:()=>[c("span",null,[e.state.length])]}),c(f,{label:"Lines"},{default:()=>[c("span",null,[e.state.lines])]}),c(f,{label:"Cursor"},{default:()=>[c("span",null,[e.state.cursor])]}),c(f,{label:"Selected"},{default:()=>[c("span",null,[e.state.selected])]})]})])}),K=t({name:"CodeMirror",setup(){const t=p("console.log('Hello, world!')"),a=[],o=b({language:"javascript",autofocus:!0,indentWithTab:!0,tabSize:2,height:"500px"}),l=b({lines:null,cursor:null,selected:null,length:null});i((()=>{const e=document.querySelector(".cm-editor");e&&g(e,"cm-editor")})),m((()=>{const e=document.querySelector(".cm-editor");e&&g(e,"cm-editor")}));const u=n();function s({view:e}){u.value=e}function r(e){const t=e.state.selection.ranges;l.selected=t.reduce(((e,t)=>e+t.to-t.from),0),l.cursor=t[0].anchor,l.length=e.state.doc.length,l.lines=e.state.doc.lines}return()=>c(e,{plugin:h},{default:()=>[c(W,null,{default:()=>[c(Y,{config:o},null),c(J,{id:"codeMirror",modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,style:{height:o.height,borderLeft:"solid 1px #ddd",borderRight:"solid 1px #ddd"},autofocus:o.autofocus,indentWithTab:o.indentWithTab,tabSize:o.tabSize,extensions:a,placeholder:"Please enter the code...",onReady:s,onUpdate:r},null),c(G,{config:o,state:l},null)]})]})}});export{K as default};
